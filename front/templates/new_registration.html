{% extends 'new_base.html' %}

{% block extra-head %}

	<title>MIM - Hunt</title>

	<meta property="og:url" content="https://www.myingressmosaics.com">
	<meta property="og:type" content="website">
	<meta property="og:title" content="MyIngressMosaics">
	<meta property="og:description" content="Ingress Mosaics, Banners and Mission series">

{% endblock %}

{% block content %}
<div id="content" ng-controller="NewRegistrationCtrl">

{% verbatim %}

	<div id="loading" ng-hide="loaded">
		<i class="item fa fa-spinner rotating"></i>
		<span class="item">Loading page...</span>
	</div>
	
	<div class="container" ng-class="{'active':loaded}">
		
		<div class="grow flex-col" ng-show="current_step == 1">
			
			<div class="p-normal">
				
				<div class="row">
					
					<div class="item">
						<button class="btn" ng-click="refreshMissions();">
							<i class="fa fa-refresh"></i>
						</button>
					</div>
					
					<div class="item grow">
						<input class="control" placeholder="Filter" ng-model="filter" ng-change="filterMissions(filter);" />
					</div>
					
				</div>
				
			</div>
			
			<hr>
				
			<div class="scrollable">
				
				<div ng-if="refreshing" class="mt-normal flex justify-center">
					<i class="item fa fa-spinner rotating"></i>
					<span class="item">Refreshing...</span>
				</div>
				
				<div ng-if="!refreshing">
					
                    <div ng-if="filtered.length < 1">
                    	
                    	<div class="text-center mt-normal mb-normal">
                    		<span class="color-muted">No mission</span>
                    	</div>
                    	
                    	<div ng-if="missions.length < 1" class="text-center">
                    		<a href="https://www.myingressmosaics.com/recruitment">Become a mosaic hunter</a>
                    	</div>
                    	
                    </div>
                    
                    <div ng-repeat="mission in filtered">
                    	
                    	<div class="p-normal" ng-class="{'bgcolor-highlight':mission.selected}">
	                    	<div class="row align-center nowrap">
	                		
		                    	<div class="item">
		                    		
	                                <a class="btn btn-icon" ng-hide="mission.selected" ng-click="selectMission(mission);">
	                                    <i class="fa fa-plus-square"></i>
	                                </a>
		                    		
	                                <a class="btn btn-icon" ng-show="mission.selected" ng-click="unselectMission(mission);">
	                                    <i class="fa fa-minus-square"></i>
	                                </a>
	                                
		                    	</div>
		                    	
				                <div class="item">
				        			<img src="/static/img/mask.png" style="width:26px; background-color:#000000; background-image:url({{mission.image}}=s25); background-size: 95% 95%; background-position: 50% 50%; float:left; background-repeat: no-repeat;" />
		                    	</div>
		                    	
		                    	<div class="item grow ellipsis">
		                    		
		                    		<div class="ellipsis">
			                    		<span class="color-light">{{mission.title}}</span>
		                    		</div>
		                    		
		                    		<div class="">
			                    		<span ng-class="{'color-enlightened': mission.faction == 'E', 'color-resistant': mission.faction == 'R'}">{{mission.creator}}</span>
		                    		</div>
		                    		
		                    	</div>
		                    	
		                    	<div class="item">
	                                <a class="btn btn-icon" ng-click="removeMission(mission);">
	                                    <i class="fa fa-trash"></i>
	                                </a>
		                    	</div>
		                    	
		                    	<div class="item">
	                                <a class="btn btn-icon" href="https://www.ingress.com/intel?ll={{mission.startLat}},{{mission.startLng}}&z=17&pll={{mission.startLat}},{{mission.startLng}}" target="blank">
	                                    <i class="fa fa-external-link"></i>
	                                </a>
		                    	</div>
		                    	
	                    	</div>
                    	</div>
                    	
                    	<hr>
                    	
                    </div>
                    
				</div>
				
			</div>
			
			<hr>
			
			<div class="p-normal">
				<div class="row">
					
					<div class="item grow flex">
						
						<div class="text-center">
							
							{{filtered.length}} missions
							
							<button class="btn btn-mini" ng-click="selectAll();">
								Select All
							</button>
							
						</div>
						
					</div>
					
					<div class="item self-center">
						<button class="btn" ng-class="{'disabled':selected.length < 3}" ng-click="open_step(2);">
							<div class="row">
								<span class="item">Next</span>
								<i class="item fa fa-angle-double-right"></i>
							</div>
						</button>
					</div>
					
				</div>
			</div>
			
		</div>
		
		<div class="grow flex-col" ng-show="current_step == 2">
			
			<div class="flex justify-center p-normal">
				Validate missions oder
			</div>
			
			<hr>
			
			<div class="scrollable">
				
				<div class="flex wrap justify-center" style="padding:0 calc((6 - {{columns}}) / 2 * 16.666667%);">
					
		            <div ng-repeat="m in offset track by $index" style="flex:0 0 calc(100% / {{columns}});">
		            </div>
		            
		            <div ng-repeat="mission in selected | reverse" class="mission-vignet" style="flex:0 0 calc(100% / {{columns}});">
		                <img src="/static/img/mask.png" style="width:100%; background-color:#000000; background-image:url({{mission.image}}=s100); background-size: 95% 95%; background-position: 50% 50%; float:left; background-repeat: no-repeat;" />
		            </div>
		            
	            </div>
			
			</div>
			
			<hr>
			
			<div class="p-normal">
				<div class="row">
					
					<div class="item grow flex">
						<button class="btn" ng-click="open_step(1);">
							<div class="row">
								<i class="item fa fa-angle-double-left"></i>
								<span class="item">Back</span>
							</div>
						</button>
					</div>
					
					<div class="item self-center">
						<button class="btn" ng-click="open_step(3);">
							<div class="row">
								<span class="item">Next</span>
								<i class="item fa fa-angle-double-right"></i>
							</div>
						</button>
					</div>
					
				</div>
			</div>
			
		</div>
		
	</div>
			
{% endverbatim %}

</div>
{% endblock %}