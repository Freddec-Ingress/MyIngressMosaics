{% extends 'base.html' %}

{% load i18n %}

{% block extra-head %}

	<title>MIM - Admin</title>

	<meta property="og:url" content="https://www.myingressmosaics.com">
	<meta property="og:type" content="website">
	<meta property="og:title" content="MyIngressMosaics">
	<meta property="og:image" content="https://www.myingressmosaics.com/static/front/img/image.png">
	<meta property="og:description" content="Search, Register and Share all Ingress Mosaics">
	
{% endblock %}

{% block header %}

	{% trans 'Admin - Registration' %}
	
{% endblock %}

{% block content %}
{% verbatim %}

<div id="page-container" ng-controller="AdmRegistrationCtrl">

    <div class="block">
        
        <div class="panel" ng-repeat="mosaic in mosaics">
            
            <div class="item-12">
                <div class="row valign-center">
    
                    <div class="item grow">
                        <input type="text" class="form-control" ng-model="mosaic.name" />
                    </div>
                    
                    <div class="item">
                        <input id="searchButton" type="submit" style="width:67px;" class="btn btn-primary ml-2" ng-click="refrech(mosaic);" value="Open" ng-disabled="mosaic.loading">
                    </div>
                    
                    <div class="item">
                        {{mosaic.count}}
                    </div>
                    
                    <div class="item">
                        <a ng-click="removeMosaic(mosaic);">
                            <i class="fa fa-trash ml-4"></i>
                        </a>
                    </div>
                   
                </div>
            </div>
            
            <div class="item-12" ng-show="mosaic.loading || mosaic.missions.length > 0">
                <div class="row">
                        
            		<div class="item-12" ng-show="mosaic.loading">
            			<i class="fa fa-spinner"></i>
            			Loading data...
            		</div>
            		
                    <div class="item-12" ng-show="!mosaic.loading && mosaic.missions.length > 0">
                        <div class="row">
                             
                	        <div class="item-4">
                	            <label>Title</label>
                	            <input type="text" class="form-control" ng-model="mosaic.title" />
                	        </div>
                	        
                	        <div class="item-4">
                	            <label>Type</label>
                	            <select class="form-control" ng-model="mosaic.type">
                	                <option value="sequence">sequence</option>
                	                <option value="serie">serie</option>
                	            </select>
                	        </div>
            
                	        <div class="item-4">
                	            <label class="m-0">Columns</label>
                	            <select class="form-control" ng-model="mosaic.columns" />
                    	                <option value="6">6</option>
                    	                <option value="5">5</option>
                    	                <option value="4">4</option>
                    	                <option value="3">3</option>
                    	                <option value="2">2</option>
                    	                <option value="1">1</option>
                   	            </select>
                	        </div>
        
                	        <div class="item-4">
                	            <label class="m-0">Country</label>
                	            <input type="text" class="form-control" ng-model="mosaic.country" />
                	        </div>
            
                	        <div class="item-4">
                	            <label class="m-0">Region</label>
                	            <input type="text" class="form-control" ng-model="mosaic.region" />
                	        </div>
            
                	        <div class="item-4">
                	            <label class="m-0">City</label>
                	            <input type="text" class="form-control" ng-model="mosaic.city" />
                	        </div>
    
                            <div class="item-6">
                                <label>Preview</label>
             					<div style="display:flex; height:200px; justify-content:center; background:#0b0c0d; padding:.25rem;" ng-class="{'scrollbar valign-start': mosaic.missions.length > 18, 'valign-center': mosaic.missions.length <= 18}">
            					
            						<div class="row" style="align-items:center; justify-content:center; padding:0 calc((6 - {{mosaic.columns}}) / 2 * 16.666667%); width:100%;">
            				            <div ng-repeat="m in mosaic.missions | reverse" style="flex:0 0 calc(100% / {{mosaic.columns}});">
            				                <img src="/static/img/mask.png" style="width:100%; background-color:#000000; background-image:url({{m.image}}=s100); background-size: 95% 95%; background-position: 50% 50%; float:left; background-repeat: no-repeat;" />
            				            </div>
            			            </div>
            			
            					</div>
                            </div>
                            
                            <div class="item-6">
                                <label class="m-0">{{mosaic.missions.length}} Missions</label>
    		                    <div class="scrollbar" style="overflow:auto; height:200px; background:#0B0C0D; border:4px solid #0B0C0D;">
    	            		        
    	            		        <div ng-if="mosaic.missions < 1" class="item">
    	            		        	No mission
    	            		        </div>
    	            		        
    	    		                <div class="panel valign-center" ng-repeat="item in mosaic.missions">
    	    		                	
     	    		                	<div class="item">
    	    			                    <input type="text" class="form-control ta-center" ng-blur="reorder();" ng-model="item.order" style="min-width:2.5rem; width:2.5rem; min-height:1.5rem; line-height:1.5rem;" />
    	    		                	</div>
    	    		                	
    	    		                	<div class="item grow ellipsis">
    	    			                     {{item.title}}
    	    		                	</div>
    	    		                	
    	    		                	<div class="item">
    				                        <a ng-click="removeMission(item);">
    				                            <i class="fa fa-minus-square"></i>
    				                        </a>
    	    		                    </div>
       		                    
    	    		                </div>
    	    		                
    	                        </div>
                             </div>
    
                	        <div class="item-6">
                	        	
                				<button class="btn btn-primary mx-2" ng-click="createMosaic(mosaic);" ng-disabled="mosaic.creating || !mosaic.title || !mosaic.type || !mosaic.columns || !mosaic.country || (mosaic.missions.length < 1)">
                				    <span>Create</span>
                        			<div ng-show="mosaic.creating" class="loading-line py-1 pl-2">
                        				<img src="/static/img/loading.png" />
                        			</div>
                				</button>
                				
                	        </div>
            
                	        <div class="item-6">
                	            
                				<button class="btn btn-secondary mx-2" ng-click="deleteMosaic(mosaic);">
                				    Delete
                				</button>
                				
                	        </div>
                	        
                        </div>
                    </div>
                    
                </div>
            </div>
            
        </div>
		
	</div>
    
</div>

{% endverbatim %}
{% endblock %}

{% block extra-script %}

	<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuXb2ncs76tO-2SN8hvkE5Zt4VwtPoNcM&amp;language=en"></script>
	
{% endblock %}