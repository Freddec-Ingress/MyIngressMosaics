<div class="text-danger text-center mt-4 mr-2 ml-2" ng-if='!user.authenticated'>
	{{'restricted_TEXT' | translate}}
</div>

<div ng-if="user.authenticated">

    <div class="card">
        
        <div class="card-header">
            <span class="text-medium">{{'missions_SUBTITLE' | translate}}</span>
        </div>
        
        <div ng-if="!missions">
            
            <div class="card-block first last">
                
                <p class="text-danger">{{'missions_NOMISSION' | translate}}</p>
                
                <p>
                    
                    {{'missions_UPDATENAME' | translate}}
                    
    				<a ui-sref="root.profile">
    					{{'profile_LINK' | translate}}
    				</a>
    				
                </p>
    
                <p>
                    
                    {{'missions_HUNTINGTOOL' | translate}}

                    <a href="https://chrome.google.com/webstore/detail/myingressmosaics-hunting/imafdiamhfamjabofbmkmbmncadhjfjk" target="_blank">
                        MyIngressMosaics Hunting Tool
                    </a>
                    
                </p>
                
            </div>
            
        </div>
        
        <div ng-if="missions">
            
            <table class="card-table no-user-select">
                <thead>
                    <tr>
                        <th></th>
                        <th style="cursor:pointer;" ng-click="sortMissionsByName();">
                            <i class="fa mr-2" ng-class="{'fa-caret-up':sortName == 'asc', 'fa-caret-down':sortName == 'desc', 'fa-sort text-muted':sortName == ''}"></i>
                            {{'missions_COLNAME' | translate}}
                        </th>
                        <th></th>
                        <th style="cursor:pointer;" ng-click="sortMissionsByCreator();">
                            <i class="fa mr-2" ng-class="{'fa-caret-up':sortCreator == 'asc', 'fa-caret-down':sortCreator == 'desc', 'fa-sort text-muted':sortCreator == ''}"></i>
                            {{'missions_COLCREATOR' | translate}}
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="item in missions" ng-class="{'selected': isSelected(item.ref)}">
                        <td class="text-center" style="width:2rem;" ng-click="$event.stopPropagation(); toggle($index, $event, item);"><i class="fa fa-check-circle" ng-class="{'text-muted': !isSelected(item.ref)}"></i></td>
                        <td ng-click="$event.stopPropagation(); toggle($index, $event, item);">
                            {{item.name}}
                        </td>
                        <td class="text-center">
                            <a href="https://www.ingress.com/mission/{{item.ref}}" class="ml-2" target="blank">
                                <i class="fa fa-external-link"></i>
                            </a>
                        </td>
                        <td ng-class="{'text-enligtened': item.faction == 'E', 'text-resistance': item.faction == 'R',}" ng-click="$event.stopPropagation(); toggle($index, $event, item);">{{item.creator}}</td>
                        <td class="text-center" ng-click="delete(item);"><i class="fa fa-trash"></i></td>
                    </tr>
                </tbody>
            </table>
            
            <div class="card-block last">
                
                <div class="form-button-bar f-justify-around">
                    
                    <div class="">
                        {{selected_missions.length}}
                        {{'missions_selected' | translate}}
                    </div>
                    
            		<button class="btn btn-secondary f-align-baseline" ng-click="nextStep();" ng-disabled="!hasSelected();">
            		    {{'missions_BTN' | translate}}
            		    <i class="fa fa-fw fa-angle-double-right btn-icon ml-2"></i>
            		</button>
            		
        		</div>
                
            </div>
            
         </div>
        
    </div>
   
</div>